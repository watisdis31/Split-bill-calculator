<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Easy Bill Calculator</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/png" href="assets/favicon2.png" />
  </head>
  <body>
    <div class="bw-screen container-fluid p-3">
      <h4 class="bw-title mb-3">RESTAURANT BILL</h4>

      <select id="currency" class="form-select bw-input mb-3">
        <option value="IDR">IDR (Rp)</option>
        <option value="USD">USD ($)</option>
      </select>

      <div class="bw-box mb-3">
        <h6 class="bw-subtitle">ADD ITEM</h6>

        <input
          id="itemName"
          class="form-control bw-input mb-2"
          placeholder="Food / Drink Name"
        />
        <input
          id="itemPrice"
          type="number"
          class="form-control bw-input mb-2"
          placeholder="Price"
        />
        <input
          id="itemQty"
          type="number"
          class="form-control bw-input mb-2"
          min="1"
          value="1"
          placeholder="Quantity"
        />

        <button class="btn bw-btn w-100" onclick="addItem()">ADD</button>
      </div>

      <div class="bw-box mb-3">
        <h6 class="bw-subtitle">ALL ORDERS</h6>
        <ul id="itemList" class="list-group"></ul>
        <div class="bw-total mt-2" id="itemsTotal">Total: 0</div>
      </div>

      <div class="bw-box mb-3">
        <h6 class="bw-subtitle">CHARGES</h6>

        <select id="discountType" class="form-select bw-input mb-2">
          <option value="percent">Discount %</option>
          <option value="amount">Discount Amount</option>
        </select>

        <div class="bw-input-wrapper mb-2">
          <input
            id="discount"
            type="number"
            class="form-control bw-input"
            placeholder="Discount"
          />
          <span id="percentLabel" class="bw-percent">%</span>
        </div>

        <select id="discountTiming" class="form-select bw-input mb-2">
          <option value="before">Before Tax & Service</option>
          <option value="after">After Tax & Service</option>
        </select>

        <input
          id="serviceCharge"
          type="number"
          class="form-control bw-input mb-2"
          placeholder="Service Charge"
        />
        <input
          id="tax"
          type="number"
          class="form-control bw-input"
          placeholder="Tax"
        />
      </div>

      <div class="bw-box mb-3">
        <h6 class="bw-subtitle">YOUR ORDER</h6>
        <ul id="yourItems" class="list-group"></ul>
        <div class="bw-total mt-2" id="yourSubtotal">Subtotal: 0</div>
      </div>

      <button class="btn bw-btn w-100 mb-3" onclick="calculate()">
        CALCULATE
      </button>

      <div id="result" class="bw-box d-none"></div>

      <button class="bw-btn w-100 mt-2" onclick="shareBill()">
        ðŸ”— SHARE BILL
      </button>

      <div id="qrWrapper" class="bw-box mt-3 d-none text-center">
        <h6 class="bw-subtitle">SCAN TO JOIN</h6>
        <div id="qrCode" class="d-flex justify-content-center"></div>
        <div class="mt-3">
          <input
            id="shareLink"
            class="form-control bw-input text-center"
            readonly
          />
          <small class="text-muted d-block mt-1">
            Tap & hold to copy link
          </small>
        </div>

        <small class="text-muted d-block mt-2"> Scan with phone camera </small>
      </div>
    </div>

    <!-- QR Code -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyCvy0GLvwSZ_HTYZcfSnqG5dNAgSq7GYLo",
        authDomain: "easy-bill-calculator.firebaseapp.com",
        projectId: "easy-bill-calculator",
        storageBucket: "easy-bill-calculator.firebasestorage.app",
        messagingSenderId: "193240064088",
        appId: "1:193240064088:web:40f5f6bab1b28c2b41ea2d",
      };

      firebase.initializeApp(firebaseConfig);
      const db = firebase.firestore();
    </script>

    <script src="script.js"></script>
  </body>
</html>
